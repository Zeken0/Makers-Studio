<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Description" content="This is a site" />
    <link rel="stylesheet" href="/css/styles.css" />
    <title>SP2</title>
  </head>
  <body>
    <header></header>
    <main></main>
    <footer></footer>
    <script type="module" src="/js/productsPage.js"></script>
  </body>
</html>
import writeHtmlToDom from "./libs/writeHtmlToDom.js";

let containerOne = document.querySelector(".container");
let containerTwo = document.querySelector(".containerTwo");

async function getData() {
  try {
    const repsonse = await fetch("https://highart.herokuapp.com/Artists/");
    const data = await repsonse.json();
    let artists = data;

    artists.forEach((artist) => {
      writeHtmlToDom(containerOne, artist);
      writeHtmlToDom(containerTwo, artist);
    });

    const searchInput = document.querySelector("#bar");
    searchInput.onkeyup = function () {
      let filteredArtists = artists.filter((artist) => {
        return artist.albumName
          .toLowerCase()
          .includes(this.value.toLowerCase());
      });

      containerOne.innerHTML = "";
      containerTwo.innerHTML = "";

      filteredArtists.forEach((artist) => {
        writeHtmlToDom(containerOne, artist);
        writeHtmlToDom(containerTwo, artist);
      });
    };

    /* ------------------------------------------ HideLoader ---------------------------------------------- */
    const loaderContent = document.querySelector(".loader");

    setTimeout(function () {
      loaderContent.style.display = "none";
      showMoreBtn.style.display = "block";
    });
    /* ----------------------------------------- /HideLoader ---------------------------------------------- */
  } catch (error) {
    document.querySelector(".alert").innerHTML += thisIsAnAlert(
      "An error has occured",
      "danger"
    );
  } finally {
    setTimeout(function () {
      document.querySelector(".alert").innerHTML = "";
    }, 3000);
  }
}
getData();
